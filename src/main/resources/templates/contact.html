<html xmlns:th="http://www.w3.org/1999/xhtml">

<head th:replace="/fragments/base :: head">
</head>

<body>

<div th:replace="/fragments/base :: navbar">
</div>

<table style="table-layout: fixed; width: 100%;">
  <tr th:each="message : ${messages}">
    <th:block th:if="${message.user.id == id}">
      <td align="right">
        <div th:text="${message.user.name}"></div>
        <div th:text="${message.content}"></div>
      </td>
    </th:block>
    <th:block th:unless="${message.user.id == id}">
      <td align="left">
        <div th:text="${message.user.name}"></div>
        <div th:text="${message.content}"></div>
      </td>
    </th:block>
  </tr>
</table>

<form class="send-form" th:action="@{/message/send}" th:object="${message}" method="post">
  <input type="text" name="content" class="float-left">
  <input type="hidden" name="user" th:text="${message[0].user.id == id ? id : message[0].userTo.id}">
  <input type="hidden" name="userTo" th:text="${message[0].user.id == id ? message[0].userTo.id : id}">
  <button id="btn" class="btn btn-primary">Send</button>
</form>

<div th:replace="/fragments/base :: footer"></div>
</body>
</html>